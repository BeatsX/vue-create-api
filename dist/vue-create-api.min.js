/**
 * vue-create-api v1.0.0
 * (c) 2018 ustbhuangyi
 * @license MIT
 */
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.VueCreateAPI=e()}(this,function(){"use strict";var w=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n},e=/-(\w)/g;function u(n){return(n+"").replace(e,function(n,e){return e?e.toUpperCase():""})}function g(n){return void 0===n}function P(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e={},r.forEach(function(n){e[n]=u("on-"+n)}),r=e;var t=w({},n),o={};for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];t[a]&&(o[i]=t[a],delete t[a])}return{props:t,on:o}}var b="hook:beforeDestroy";function p(d){var v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],l=2<arguments.length&&void 0!==arguments[2]&&arguments[2],_=this,y={},$=[];function m(e,r,n,t){$.forEach(function(n){n(e,r,t)});var o=n.parent?n.parent._uid:-1,i=y[o]?y[o]:{},a=i.comp,c=i.ins;if(t&&a&&c)return c.updateRenderData(e,r),c.$forceUpdate(),a;var u=function(n,r,e,t,o){var i=void 0,a=void 0,c=new n(w({},o,{render:function(n){var e=a&&a(n);return e&&!Array.isArray(e)&&(e=[e]),n(r,w({},i),e||[])},methods:{init:function(){document.body.appendChild(this.$el)},destroy:function(){this.$destroy(),document.body.removeChild(this.$el)}}}));c.updateRenderData=function(n,e){i=n,a=e},c.updateRenderData(e,t),c.$mount(),c.init();var u=c.$children[0];return u.$updateProps=function(n){w(i.props,n),c.$forceUpdate()},u}(_,d,e,r,n),p=u.$parent,f=u.remove;u.remove=function(){f&&f.call(this),p.destroy(),t&&(y[o]=null)};var s=u.show;u.show=function(){return s&&s.call(this),this};var h=u.hide;return u.hide=function(){return h&&h.call(this),this},t&&(y[o]={comp:u,ins:p}),u}return{before:function(n){$.push(n)},create:function(n,e,r){"function"!=typeof e&&g(r)&&(r=e,e=null),g(r)&&(r=l);var t=this,o=!!t.$on,i={};o&&((i.parent=t).__unwatchFns__||(t.__unwatchFns__=[]));var a,c,u,p,f,s=P(n,v),h=null;return function(t,r,n,e){var o=r.props.$props;if(o){delete r.props.$props;var i=[],a=[];if(Object.keys(o).forEach(function(n){var e=o[n];"string"==typeof e&&e in t?(r.props[n]=t[e],i.push(n),a.push(e)):r.props[n]=e}),n){var c=t.$watch(function(){var r={};return i.forEach(function(n,e){r[n]=t[a[e]]}),r},e);t.__unwatchFns__.push(c)}}}(t,s,o,function(n){h&&h.$updateProps(n)}),c=t,(u=(a=s).props.$events)&&(delete a.props.$events,Object.keys(u).forEach(function(n){var e=u[n];"string"==typeof e&&(e=c[e]),a.on[n]=e})),f=(p=s).props,Object.keys(f).forEach(function(n){"$"===n.charAt(0)&&(p[n.slice(1)]=f[n],delete f[n])}),h=m(s,e,i,r),o&&t.$on(b,function(){n=t,n.__unwatchFns__&&(n.__unwatchFns__.forEach(function(n){n()}),n.__unwatchFns__=null),h.remove(),h=null;var n}),h}}}return function(i){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=n.componentPrefix,a=void 0===e?"":e,r=n.apiPrefix,c=void 0===r?"$create-":r;i.createAPI=function(n,e,r){"boolean"==typeof e&&(r=e,e=[]);var t=p.call(this,n,e,r),o=function(n,e){var r=e.componentPrefix,t=e.apiPrefix,o=n.name;!function(n,e){if(!n)throw new Error("[create-api error]: "+e)}(o,"Component must have name while using create-api!");var i,a=new RegExp("^"+(r+"").replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(i||"")+"-]","g"),"\\$&"),"i"),c=o.replace(a,"");return""+u(""+t+c)}(n,{componentPrefix:a,apiPrefix:c});return i.prototype[o]=n.$create=t.create,t}}});